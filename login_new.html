<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport"
content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<link href="login_new.css" rel="stylesheet">
<title>Login page</title>

<script src="sign_up.js"></script>
<script src="login.js"></script>

<div>
  <header class="home-header">
      <img alt="image" src="snapedit_1695414033775.png" class="home-image"/>
    </div>
    <div class="home-container">
      <script src="Stars.js"></script>
      <button name="log in" type="button" onclick="window.location.href='login_new.html';" class="transparent-button">
        <span class="home-text1">Log in</span></button>
      <button name="log in" type="button" onclick="window.location.href='sign_up.html';" class="transparent-button2">
        <span class="home-text2">Sign up</span></button>
    </div>
  </header>

  <body>
    <header class="home-container1">
      <div class="container">
        <div class="left">
          <div class="login">Login into Secura</div>
        </div>
        <div class="right">
          <div class="form">
            <div id="authForm">
              <form action="#">
                <label for="email">Email</label>
                <input type="email" id="email" required>
                <label for="password">Password</label>
                <input type="password" id="p1" required>
                <button class="btn" type = "submit" id ="signInButton">Log in</button>
              </form>
            </div>
            <script type="module">
              // Import the functions you need from the SDKs you need
              import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
              import {
                getAuth,
                createUserWithEmailAndPassword,
                signInWithEmailAndPassword,
                onAuthStateChanged,
                signOut
              } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";
              // TODO: Add SDKs for Firebase products that you want to use
              // https://firebase.google.com/docs/web/setup#available-libraries
            
              // Your web app's Firebase configuration
  
  
              const firebaseConfig = {
                apiKey: "AIzaSyAwobDIPvOsRDTFnbSZB8Ib4kxXNeE5BYw",
                authDomain: "auth-11f95.firebaseapp.com",
                projectId: "auth-11f95",
                storageBucket: "auth-11f95.appspot.com",
                messagingSenderId: "554428377159",
                appId: "1:554428377159:web:a0839f04f79899911a6962"
              };
            
              // Initialize Firebase
              const app = initializeApp(firebaseConfig);
              const auth = getAuth(app);
  
              const userEmail = document.querySelector("#email");
              const userPassword = document.querySelector("#p1");
              const authForm = document.querySelector("#authForm");
              const signInButton = document.querySelector("#signInButton");
  
            const userSignIn = async() => {
            const signInEmail = userEmail.value;
            const signInPassword = userPassword.value;
            signInWithEmailAndPassword(auth, signInEmail, signInPassword)
            .then((userCredential) => {
                const user = userCredential.user;
                window.location.href = "instructions.html"
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                console.log(errorCode + errorMessage)
            })
            }
            signInButton.addEventListener('click', userSignIn);
            </script>
          </div>
        </div>
      </div>
    </header>
  </body>
  </html>
